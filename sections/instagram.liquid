{{ 'text-with-reviews.css' | asset_url | stylesheet_tag }}
{{ 'instagram.css' | asset_url | stylesheet_tag }}

{%- capture section_styles -%}
{%- if section.settings.background != 'hide' -%}
{%- liquid
	capture color
	if section.settings.background == 'color'
    echo section.settings.color_background
    else
    echo section.settings.gradient
    endif
    endcapture
-%}
{%- if color != "rgba(0,0,0,0)" and color != blank -%}
#instagram-{{ section.id }}{
  --color-section-background: {{ color }};
}
{%- endif -%}
{%- if section.settings.remove_bottom_spacing -%}
#instagram-{{ section.id }}.section-background,
#instagram-{{ section.id }} .section-background{
  padding-bottom: 0;
}
{%- endif -%}
{%- endif -%}

{%- if section.settings.color_description != "rgba(0,0,0,0)" -%}
#instagram-{{ section.id }} .link_text,
#instagram-{{ section.id }} .text{
  color:{{section.settings.color_description}};
}
#instagram-{{ section.id }} .slick-dots li button:before{
  border-color: {{section.settings.color_description}};
}
#instagram-{{ section.id }} .slick-dots li.slick-active button:before{
  background: {{section.settings.color_description}};
}
#instagram-{{ section.id }} .slick-arrow svg path{
  fill: {{section.settings.color_description}};
}
{%- endif -%}
{%- endcapture -%}
{%- if section_styles != blank -%}
<style>{{ section_styles }}</style>
{%- endif -%}

<div id="instagram-{{ section.id }}" class="text_with_reviews instagram_feed top-spacing-{{ section.settings.top_spacing }}{% if section.settings.background != 'hide' and section.settings.background_width == "fullwidth" %} section-background section-background--{{ section.settings.background_spacing }}{% endif %}"
     data-section-name="featured-in">
  <div class="{{ section.settings.width }}">
    {% if section.settings.background != 'hide' and section.settings.background_width == "content_width" %}<div class="section-background section-background--{{ section.settings.background_spacing }} border__radius">{%- endif -%}
    
    <div class="grid align-items-center">
      <div class="col-st-12 col-6 reviews_heading text-center">
        <div class="insta_feed_content">
      {% if section.settings.heading != blank %}
       {%- liquid
          if section.settings.color_heading != "rgba(0,0,0,0)"
          assign color_heading = ' style="color:' | append: section.settings.color_heading | append: ';"'
          endif
      -%}
      <h2 class="{{ section.settings.heading_tag }} section-title mb-5 mb-lg-6" {{ color_heading }}>
        {{ section.settings.heading }}
      </h2>
      {% endif %}

      {% if section.settings.link_text != blank %}
        <a href="{{ section.settings.link }}" class="link_text {{ section.settings.description_size }} display-flex align-items-center justify-content-center mb-3" target="_blank">
        <svg class="mr-2" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M15.233 5.488C14.39 5.45 14.136 5.442 12 5.442C9.864 5.442 9.611 5.45 8.768 5.488C6.598 5.587 5.587 6.615 5.489 8.767C5.45 9.611 5.441 9.864 5.441 12C5.441 14.136 5.45 14.389 5.488 15.233C5.587 17.381 6.594 18.413 8.767 18.512C9.61 18.55 9.864 18.559 12 18.559C14.137 18.559 14.39 18.551 15.233 18.513C17.403 18.414 18.413 17.384 18.512 15.234C18.55 14.39 18.558 14.137 18.558 12.001C18.558 9.865 18.55 9.612 18.512 8.769C18.413 6.616 17.401 5.587 15.233 5.488ZM12 16.108C9.731 16.108 7.892 14.269 7.892 12C7.892 9.731 9.732 7.892 12 7.892C14.268 7.892 16.108 9.731 16.108 12C16.108 14.269 14.269 16.108 12 16.108ZM16.271 8.69C15.741 8.69 15.311 8.26 15.311 7.73C15.311 7.2 15.741 6.77 16.271 6.77C16.801 6.77 17.231 7.2 17.231 7.73C17.231 8.26 16.801 8.69 16.271 8.69ZM14.667 12C14.667 13.473 13.473 14.667 12 14.667C10.527 14.667 9.333 13.473 9.333 12C9.333 10.527 10.527 9.333 12 9.333C13.473 9.333 14.667 10.527 14.667 12ZM19 0H5C2.239 0 0 2.239 0 5V19C0 21.761 2.239 24 5 24H19C21.762 24 24 21.761 24 19V5C24 2.239 21.762 0 19 0ZM19.952 15.298C19.82 18.207 18.201 19.819 15.299 19.952C14.445 19.991 14.173 20 12 20C9.827 20 9.556 19.991 8.702 19.952C5.794 19.819 4.182 18.204 4.048 15.298C4.009 14.445 4 14.173 4 12C4 9.828 4.009 9.555 4.048 8.702C4.182 5.794 5.796 4.181 8.702 4.049C9.556 4.009 9.827 4 12 4C14.173 4 14.445 4.009 15.299 4.048C18.207 4.181 19.822 5.799 19.952 8.701C19.991 9.555 20 9.828 20 12C20 14.173 19.991 14.445 19.952 15.298Z" fill="#222222"/>
        <path d="M15.233 5.488C14.39 5.45 14.136 5.442 12 5.442C9.864 5.442 9.611 5.45 8.768 5.488C6.598 5.587 5.587 6.615 5.489 8.767C5.45 9.611 5.441 9.864 5.441 12C5.441 14.136 5.45 14.389 5.488 15.233C5.587 17.381 6.594 18.413 8.767 18.512C9.61 18.55 9.864 18.559 12 18.559C14.137 18.559 14.39 18.551 15.233 18.513C17.403 18.414 18.413 17.384 18.512 15.234C18.55 14.39 18.558 14.137 18.558 12.001C18.558 9.865 18.55 9.612 18.512 8.769C18.413 6.616 17.401 5.587 15.233 5.488ZM12 16.108C9.731 16.108 7.892 14.269 7.892 12C7.892 9.731 9.732 7.892 12 7.892C14.268 7.892 16.108 9.731 16.108 12C16.108 14.269 14.269 16.108 12 16.108ZM16.271 8.69C15.741 8.69 15.311 8.26 15.311 7.73C15.311 7.2 15.741 6.77 16.271 6.77C16.801 6.77 17.231 7.2 17.231 7.73C17.231 8.26 16.801 8.69 16.271 8.69ZM14.667 12C14.667 13.473 13.473 14.667 12 14.667C10.527 14.667 9.333 13.473 9.333 12C9.333 10.527 10.527 9.333 12 9.333C13.473 9.333 14.667 10.527 14.667 12ZM19 0H5C2.239 0 0 2.239 0 5V19C0 21.761 2.239 24 5 24H19C21.762 24 24 21.761 24 19V5C24 2.239 21.762 0 19 0ZM19.952 15.298C19.82 18.207 18.201 19.819 15.299 19.952C14.445 19.991 14.173 20 12 20C9.827 20 9.556 19.991 8.702 19.952C5.794 19.819 4.182 18.204 4.048 15.298C4.009 14.445 4 14.173 4 12C4 9.828 4.009 9.555 4.048 8.702C4.182 5.794 5.796 4.181 8.702 4.049C9.556 4.009 9.827 4 12 4C14.173 4 14.445 4.009 15.299 4.048C18.207 4.181 19.822 5.799 19.952 8.701C19.991 9.555 20 9.828 20 12C20 14.173 19.991 14.445 19.952 15.298Z" fill="#A78952"/>
        </svg>
        {{ section.settings.link_text }}</a>
      {% endif %}

      {% if section.settings.text != blank %}
        <div class="text {{ section.settings.description_size }} mb-4 mb-lg-0">{{ section.settings.text }}</div>
      {% endif %}
        </div>
      </div>
      <div class="col-st-12 col-6 reviews_slider">
         {% if section.blocks.size > 0 %}
            <div class="review_slider_wrapper text_review_slider_wrapper">
              {% for block in section.blocks %}
                <div class="reviews_slide text-center">
                  <div class="reviews_slide_inner">
                            {% if block.settings.image != blank %}
          <div class="image_wrapper">
          {%- assign image = block.settings.image -%}
          <img srcset="{%- if image.width >= 400 -%}{{ image | image_url: width: 400 }} 400w,{%- endif -%}
                       {%- if image.width >= 540 -%}{{ image | image_url: width: 540 }} 540w,{%- endif -%}
                       {%- if image.width >= 1240 -%}{{ image | image_url: width: 1240 }} 1240w,{%- endif -%}
                       {{ image | image_url }} {{ image.width }}w"
               src="{{ image | image_url: width: 540 }}"
               sizes="(min-width: 1440px) {% if page_is_wide %}calc((100vw - {{ settings.spacing_grid_horizontal }}px) / 2){% else %}calc(({{ settings.page_width }}px - 20px) / 2){% endif %},(min-width: 993px) calc((100vw - 140px) / 2),(min-width: 577px) calc((100vw - 40px - {{ settings.spacing_grid_horizontal }}px) / 2),calc((100vw - 40px - {{ settings.spacing_grid_horizontal }}px) / 2)"
               loading="lazy"
               alt="{{ image.alt | escape }}"
               {% render "additional-image-attributes" %}
               >
          </div>
          {% endif %}
                  </div>
                </div>
                {% endfor %}
            </div>
          {% endif %}
      </div>
    </div>
    
    {% if section.settings.background != 'hide' and section.settings.background_width == "content_width" %}</div>{%- endif -%}
    
  </div>
</div>

{% schema %}
  {
    "name": "Instagram",
  	"tag": "section",
    "settings": [
      {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Featured In"
    },
         {
        "type": "color",
        "id": "color_heading",
        "default": "rgba(0,0,0,0)",
        "label": "t:sections.general.settings.heading.label"
      },
      	  {
		"type": "color",
		"id": "color_description",
		"default": "rgba(0,0,0,0)",
		"label": "t:sections.general.settings.description.label"
	  },
     {
      "type": "url",
      "id": "link",
      "label": "Link"
       },
                {
      "type": "text",
      "id": "link_text",
      "label": "Link text"
    },
          {
      "type": "text",
      "id": "text",
      "label": "Text"
    },
      {
        "type": "header",
        "content": "t:sections.general.settings.header_layout.content"
      },
      {
        "type": "select",
        "id": "top_spacing",
        "options": [
          {
            "value": "none",
            "label": "t:sections.general.settings.top_spacing.options__none.label"
          },
          {
            "value": "small",
            "label": "t:sections.general.settings.top_spacing.options__small.label"
          },
          {
            "value": "medium",
            "label": "t:sections.general.settings.top_spacing.options__medium.label"
          },
          {
            "value": "normal",
            "label": "t:sections.general.settings.top_spacing.options__normal.label"
          }
        ],
        "default": "normal",
		"label": "t:sections.general.settings.top_spacing.label"
      },
      {
        "type": "select",
        "id": "width",
        "options": [
          {
            "value": "page-width",
            "label": "t:sections.general.settings.width.options__boxed.label"
          },
          {
            "value": "page-wide",
            "label": "t:sections.general.settings.width.options__wide.label"
          }
        ],
        "default": "page-width",
        "label": "t:sections.general.settings.width.label",
		"info": "t:sections.general.settings.width.info"
      },
	  {
		"type": "select",
		"id": "heading_tag",
		"options": [
		  {
			"value": "h1",
			"label": "t:sections.general.settings.heading_tag.options__h1.label"
		  },
		  {
			"value": "h2",
			"label": "t:sections.general.settings.heading_tag.options__small.label"
		  }
		],
		"default": "h2",
		"label": "t:sections.general.settings.heading_tag.label"
	  },
	  {
		"type": "select",
		"id": "description_size",
		"options": [
		  {
			"value": "normal",
			"label": "t:sections.general.settings.description_size.options__normal.label"
		  },
		  {
			"value": "body2",
			"label": "t:sections.general.settings.description_size.options__small.label"
		  }
		],
		"default": "normal",
		"label": "t:sections.general.settings.description_size.label"
	  },
      {
        "type": "header",
		"content": "t:sections.general.settings.header_background.content"
      },
	  {
		"type": "select",
		"id": "background",
		"options": [
		  {
			"value": "hide",
			"label": "t:sections.general.settings.background.options__hide.label"
		  },
		  {
			"value": "color",
			"label": "t:sections.general.settings.background.options__color.label"
		  },
		  {
			"value": "gradient",
			"label": "t:sections.general.settings.background.options__gradient.label"
		  }
		],
		"default": "hide",
		"label": "t:sections.general.settings.background.label"
	  },
	  {
		"type": "color",
		"id": "color_background",
		"default": "rgba(0,0,0,0)",
		"label": "t:sections.general.settings.color_background.label"
	  },
      {
		"type": "color_background",
        "id": "gradient",
		"label": "t:sections.general.settings.gradient.label"
      },
	  {
		"type": "select",
		"id": "background_width",
		"options": [
		  {
			"value": "fullwidth",
			"label": "t:sections.general.settings.background_width.options__1.label"
		  },
		  {
			"value": "content_width",
			"label": "t:sections.general.settings.background_width.options__2.label"
		  }
		],
		"default": "fullwidth",
		"label": "t:sections.general.settings.background_width.label"
	  },
	  {
		"type": "select",
		"id": "background_spacing",
        "options": [
          {
            "value": "none",
            "label": "t:sections.general.settings.background_spacing.options__none.label"
          },
          {
            "value": "small",
            "label": "t:sections.general.settings.background_spacing.options__small.label"
          },
          {
            "value": "medium",
            "label": "t:sections.general.settings.background_spacing.options__medium.label"
          },
          {
            "value": "normal",
            "label": "t:sections.general.settings.background_spacing.options__normal.label"
          }
        ],
		"default": "normal",
		"label": "t:sections.general.settings.background_spacing.label"
	  },
      {
        "type": "checkbox",
        "id": "remove_bottom_spacing",
        "default": false,
		"label": "t:sections.general.settings.remove_bottom_spacing.label"
      }
	],
      "blocks": [
      {
        "type": "image",
        "name": "Image",
        "settings": [
          {
            "type": "image_picker",
            "id": "image",
			"label": "Image"
          }
        ]
      }
    ],
    "presets": [
      {
      	"name": "Instagram"
      }
    ]
  }
{% endschema %}